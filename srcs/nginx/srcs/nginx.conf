events
{
	worker_connections 768;
}

http
{
	server
	{
		listen	80;
		listen	[::]:80;
		root	/var/www;
		index index.php index.htm index.html;
		
		location /
		{
			return 301 https://$host$request_uri;
		}
	}

	server
	{
		listen	443 ssl;
		listen	[::]:443 ssl;
		
		ssl_certificate		/etc/nginx/ssl/nginx.crt;
		ssl_certificate_key	/etc/nginx/ssl/nginx.key;
		root 				/var/www;
		
#		error_page		497	https://$host:$request_uri;
#		error_page		404	https://$host/phpmyadmin$request_uri;
		index index.php index.htm index.html;

		location /
		{
			try_files $uri $uri/ =404;
		}
		location /wordpress 
		{
        	return 307 http://172.17.0.3:5050;
    	}

		location /phpmyadmin/
		{
			proxy_pass https://phpmyadmin-svc:5000/;
		}
	}
}
